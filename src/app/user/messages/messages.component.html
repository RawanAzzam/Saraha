<app-nav-bar></app-nav-bar>
<app-active-bar></app-active-bar>
<section>
    <div class="gap2 gray-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row merged20" id="page-contents">
                       <app-profile-bar></app-profile-bar>
                    <!-- Message -->
                    <div class="col-lg-12" >

                        <div class="central-meta item" *ngFor="let message of this.messageService.userMessages">
                         
                            <div class="user-post">
                                <div class="friend-info">
                                    <figure>
                                        <img *ngIf="!message.is_Anon" src="./../../assets/{{message.userFromImage}}" alt="">
                                        <img *ngIf="message.is_Anon" src="../../../assets/Unknown_person.jpg" alt="">

                                    </figure>
                                    <div class="friend-name">
                                        <div class="more">
                                            <div class="more-post-optns"><i class="ti-more-alt"></i>
                                                <ul>
                                                   
                                                    <li class="bad-report" ><i class="fa fa-flag"></i>Report</li>
                                                    <!-- (click)="MsgToPost(message.messageContent, message.userTo)" -->
                                                    <li class="bad-report" (click)="openPublishDailog(message.messageContent, message.userTo)" ><i class="fa fa-globe"></i>Publish</li>
                                                    <li class="bad-report" (click)="openReplyDailog(message.fromId, message.toId)"><i class="fa fa-reply"></i>Reply</li>
                                                </ul>
                                            </div>
                                        </div>
                                      
                                        <ins *ngIf="!message.is_Anon"><a  href="time-line.html" title="">{{message.from}}</a> </ins>
                                        <ins *ngIf="message.is_Anon"><a  href="time-line.html" title="">Unknown</a> </ins>
                                        <span>{{message.messageDate| date:'medium'}} </span>
                                    </div>
                                    <div class="post-meta">
                                     								
                                        <div class="description">
                                            <p >{{message.messageContent}}  </p>
                                    
                                        </div>
                              
                                    </div>
                                   
                                </div>
                            </div>
                            
                        </div>
                       
                       
                    
                    </div>
                      
                    </div>	
                </div>
            </div>
        </div>
    </div>	
</section><!-- content -->

<ng-template #callreplyDailog>
    <form class="example-form" [formGroup]="replyForm" >
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Message Content</mat-label>
          <textarea rows="4" type="text" matInput formControlName="messageContent">
          </textarea>
        </mat-form-field>
   
   <div class="setting-row">
            <span>Send As Anonymous</span>
            <input type="checkbox" (change)="change($event)"  formControlName="is_Anon" id="switch2"/> 
            <label for="switch2"  data-off-label="OFF"></label>
        </div>
      
          <button (click)="replyMessage()">Reply</button>
    </form>
    
</ng-template>

<ng-template #callPublishDailog>
    <form class="example-form" [formGroup]="publishForm" >
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Reply: </mat-label>
            <textarea rows="4" type="text" matInput formControlName="reply">
            </textarea>
          </mat-form-field>
       
  
          <button (click)="MsgToPost()">Reply</button>
    </form>
    
</ng-template>